source ~/.vimrc

" IdeaVim
" https://github.com/JetBrains/ideavim/blob/master/doc/set-commands.md
" https://towardsdatascience.com/the-essential-ideavim-remaps-291d4cd3971b

" Syntax for binding IDE actions.
" <Action>(CommandName)
" :action CommandName<CR>
" Both are valid approaches, but <Action> is more readable.
" However, it doesn't work for with `nore` commands, so use :action in those cases.
" List of action ids: https://gist.github.com/zchee/9c78f91cc5ad771c1f5d

" edit .ideavimrc with \i, reload with \r
nnoremap \i :e ~/.ideavimrc<CR>
"nnoremap \r :source ~/.ideavimrc<CR>
nnoremap \r :action IdeaVim.ReloadVimRc.reload<CR>

" enable using the system clipboard from IdeaVim and vice-versa
set clipboard+=unnamed
set clipboard+=ideaput

" https://github.com/JetBrains/ideavim/blob/ae1ad9fd2e756063e3d768f5bd74e65de889b7e9/doc/ideajoin-examples.md
" J (shift-j)
set ideajoin
set idearefactormode=keep
set ideastatusicon=disabled

" Match XML/HTML tags with %
set matchit

set visualbell






"-------------------
"----- PLUGINS -----
"-------------------

" Which-Key plugin setup (available keybindings in popup)
set which-key
set notimeout
"set timeoutlen=5000
let g:WhichKey_DefaultDelay = 0 " default is 200

Plug 'tpope/vim-commentary'
Plug 'tpope/vim-surround'

let g:NERDTreeMapPreview = 'O'

set multicursor
Plug 'terryma/vim-multiple-cursors'
Plug 'tommcdo/vim-exchange'

" highlightedyank plugin setup
Plug 'machakann/vim-highlightedyank'
let g:highlightedyank_highlight_duration = "500"
let g:highlightedyank_highlight_color = "rgba(57, 197, 187, 155)"

Plug 'dbakker/vim-paragraph-motion'
Plug 'vim-scripts/ReplaceWithRegister'
Plug 'kana/vim-textobj-entire'

" <count>ai	An Indentation level and line above.
" <count>ii	Inner Indentation level (no line above).
" <count>aI	An Indentation level and lines above/below.
" <count>iI	Inner Indentation level (no lines above/below).
Plug 'michaeljsmith/vim-indent-object'

" if - "inner function" - selects the function body (excluding braces)
" af - "around function" - selects the entire function (including braces and signature)
set functiontextobj

Plug 'vim-scripts/argtextobj.vim'
" select items in a list or generic class definition in Java/Kotlin
let g:argtextobj_pairs="[:],(:),<:>"

" In normal mode: Press " to see registers before using them in commands
" In insert mode: Press Ctrl-R to see registers before pasting their contents
set peekaboo

" Switch plugin setup
set switch
nnoremap <C-s> :Switch<CR>
nnoremap <C-S-s> :SwitchReverse<CR>
let g:switch_definitions = 'group:basic'
" Some custom definitions exist in built-in ones, but let's define them for visibility.
let g:switch_custom_definitions = [
  \ switchWords(['val', 'var']),
  \ switchWords(['private', 'internal', 'protected', 'public']),
  \ switchWords(['interface', 'class', 'object']),
  \ switchWords(['open', 'abstract', 'sealed']),
  \ switchWords(['check', 'require']),
  \ switchWords(['checkNotNull', 'requireNotNull']),
  \ switchWords(['isEmpty', 'isNotEmpty']),
  \ switchWords(['isBlank', 'isNotBlank']),
  \ switchWords(['onSuccess', 'onFailure']),
  \ switchWords(['shouldBe', 'shouldNotBe']),
  \ switchWords(['shouldBeNull', 'shouldNotBeNull']),
  \ switchWords(['shouldBeSuccess', 'shouldBeFailure']),
  \ switchWords(['shouldBeTrue', 'shouldBeFalse']),
  \ switchWords(['ON_CREATE', 'ON_START', 'ON_RESUME', 'ON_PAUSE', 'ON_STOP', 'ON_DESTROY']),
  \ switchWords(['INITIALIZED', 'CREATED', 'STARTED', 'RESUMED', 'PAUSED', 'STOPPED', 'DESTROYED']),
  \ switchWords(['Log.v', 'Log.i', 'Log.d', 'Log.w', 'Log.e', 'Log.wtf']),
  \ switchWords(['Timber.v', 'Timber.i', 'Timber.d', 'Timber.w', 'Timber.e', 'Timber.wtf']),
  \ switchNormalizedCaseWords(['on', 'off']),
  \ switchNormalizedCaseWords(['foreground', 'background']),
  \ switchNormalizedCaseWords(['horizontal', 'vertical']),
  \ switchNormalizedCaseWords(['visible', 'invisible']),
  \ switchNormalizedCaseWords(['before', 'after']),
  \ switchNormalizedCaseWords(['below', 'above']),
  \ switchNormalizedCaseWords(['under', 'over']),
  \ switchNormalizedCaseWords(['top', 'bottom', 'start', 'end']),
  \ switchNormalizedCaseWords(['width', 'height']),
  \ switchNormalizedCaseWords(['light', 'dark']),
  \ switchNormalizedCaseWords(['day', 'night']),
  \ switchNormalizedCaseWords(['first', 'last']),
  \ switchNormalizedCaseWords(['min', 'max']),
  \ switchNormalizedCaseWords(['old', 'new']),
  \ switchNormalizedCaseWords(['previous', 'current', 'next']),
  \ switchNormalizedCaseWords(['accept', 'decline']),
  \ switchNormalizedCaseWords(['accepted', 'declined']),
  \ switchNormalizedCaseWords(['accepting', 'declining']),
  \ switchNormalizedCaseWords(['accepts', 'declines']),
  \ switchNormalizedCaseWords(['activate', 'deactivate']),
  \ switchNormalizedCaseWords(['activated', 'deactivated']),
  \ switchNormalizedCaseWords(['activates', 'deactivates']),
  \ switchNormalizedCaseWords(['activating', 'deactivating']),
  \ switchNormalizedCaseWords(['active', 'inactive']),
  \ switchNormalizedCaseWords(['allow', 'deny']),
  \ switchNormalizedCaseWords(['allowed', 'denied']),
  \ switchNormalizedCaseWords(['allowing', 'denying']),
  \ switchNormalizedCaseWords(['allows', 'denies']),
  \ switchNormalizedCaseWords(['attach', 'detach']),
  \ switchNormalizedCaseWords(['attached', 'detached']),
  \ switchNormalizedCaseWords(['attaches', 'detaches']),
  \ switchNormalizedCaseWords(['attaching', 'detaching']),
  \ switchNormalizedCaseWords(['enable', 'disable']),
  \ switchNormalizedCaseWords(['enabled', 'disabled']),
  \ switchNormalizedCaseWords(['enables', 'disables']),
  \ switchNormalizedCaseWords(['enabling', 'disabling']),
  \ switchNormalizedCaseWords(['enter', 'exit']),
  \ switchNormalizedCaseWords(['enters', 'exits']),
  \ switchNormalizedCaseWords(['expand', 'collapse']),
  \ switchNormalizedCaseWords(['expanded', 'collapsed']),
  \ switchNormalizedCaseWords(['expanding', 'collapsing']),
  \ switchNormalizedCaseWords(['expands', 'collapses']),
  \ switchNormalizedCaseWords(['grant', 'revoke']),
  \ switchNormalizedCaseWords(['granted', 'revoked']),
  \ switchNormalizedCaseWords(['granting', 'revoking']),
  \ switchNormalizedCaseWords(['grants', 'revokes']),
  \ switchNormalizedCaseWords(['include', 'exclude']),
  \ switchNormalizedCaseWords(['included', 'excluded']),
  \ switchNormalizedCaseWords(['includes', 'excludes']),
  \ switchNormalizedCaseWords(['including', 'excluding']),
  \ switchNormalizedCaseWords(['increase', 'decrease']),
  \ switchNormalizedCaseWords(['increased', 'decreased']),
  \ switchNormalizedCaseWords(['increases', 'decreases']),
  \ switchNormalizedCaseWords(['increasing', 'decreasing']),
  \ switchNormalizedCaseWords(['open', 'close']),
  \ switchNormalizedCaseWords(['opened', 'closed']),
  \ switchNormalizedCaseWords(['opening', 'closing']),
  \ switchNormalizedCaseWords(['opens', 'closes']),
  \ switchNormalizedCaseWords(['show', 'hide']),
  \ switchNormalizedCaseWords(['showing', 'hiding']),
  \ switchNormalizedCaseWords(['shown', 'hidden']),
  \ switchNormalizedCaseWords(['shows', 'hides']),
  \ switchNormalizedCaseWords(['succeeded', 'failed']),
  \ switchNormalizedCaseWords(['succeeding', 'failing']),
  \ switchNormalizedCaseWords(['succeeds', 'fails']),
  \ switchNormalizedCaseWords(['success', 'failure']),
  \ switchNormalizedCaseWords(['valid', 'invalid']),
  \ switchNormalizedCaseWords(['validated', 'invalidated']),
  \ switchNormalizedCaseWords(['validates', 'invalidates']),
  \ switchNormalizedCaseWords(['validating', 'invalidating'])
\ ]

" Flash plugin setup
nmap s <Action>(flash.search)
xmap s <Action>(flash.search)

"--------------------
"----- MAPPINGS -----
"--------------------

" tag
nmap <leader>qf <Action>(ShowIntentionActions)
nmap <leader>qp <Action>(QuickPreview)
nmap <leader>qd <Action>(QuickDefinition)
nmap <leader>qD <Action>(QuickTypeDefinition)
nmap <leader>qr <Action>(ToggleRenderedDocPresentation)


vmap J <Action>(MoveLineDown)
vmap K <Action>(MoveLineUp)

" Idea smart-select (expanding selection)
nmap <m-j> <Action>(EditorUnSelectWord)
nmap <m-k> <Action>(EditorSelectWord)
vmap <m-j> <Action>(EditorUnSelectWord)
vmap <m-k> <Action>(EditorSelectWord)

" find
map fa <Action>(GotoAction)
map fc <Action>(GotoClass)
map fe <Action>(SearchEverywhere)
map fr <Action>(RecentFiles)
map ff <Action>(GotoFile)
map fl <Action>(RecentLocations)
map fp <Action>(FindInPath)
map fr <Action>(ReplaceInPath)
map fs <Action>(GotoSymbol)
map ft <Action>(TextSearchAction)

" file
map <leader>fs <Action>(FileStructurePopup)

" usages
nmap <leader>uf <Action>(FindUsages)
" Highlight usages, use CMD+G/Shift+CMD+G to iterate
nmap <leader>uh <Action>(HighlightUsagesInFile)
nmap <leader>un <Action>(FindNext)
nmap <leader>up <Action>(FindPrevious)
nmap <leader>uo <Action>(SelectAllOccurrences)
nmap <leader>us <Action>(ShowUsages)

" code
nmap <leader>gmo <Action>(OverrideMethods)
nmap <leader>gmi <Action>(ImplementMethods)
nmap <leader>gc <Action>(Generate)
nmap <leader>gt <Action>(GotoTest)

" goto
nmap ge <Action>(GotoNextError)
nmap gE <Action>(GotoPreviousError)
nmap gb <Action>(Back)
nmap gd <Action>(GotoDeclaration)
nmap gD <Action>(GotoTypeDeclaration)
nmap gf <Action>(Forward)
nmap gi <Action>(ShowIntentionActions)
nmap gI <Action>(GotoImplementation)
nmap gl <Action>(QuickJavaDoc)
nmap gL <Action>(QuickImplementations)
nmap gn <Action>(ShowNavBar)
nmap go <Action>(GotoSuperMethod)
nmap gt <Action>(GotoTest)
nmap gy <Action>(ShowErrorDescription)

nmap <c-h> <Action>(Back)
nmap <c-l> <Action>(Forward)

" refactor
nmap <leader>r <Action>(Refactorings.QuickListPopupAction)
nmap <leader>rd <Action>(SafeDelete)
nmap <leader>rec <Action>(IntroduceConstant)
nmap <leader>ref <Action>(IntroduceProperty)
nmap <leader>rem <Action>(ExtractMethod)
nmap <leader>rev <Action>(IntroduceVariable)
nmap <leader>rf <Action>(ReformatCode)
nmap <leader>ri <Action>(Inline)
nmap <leader>ro <Action>(OptimizeImports)
nmap <leader>rm <Action>(MoveElement)
nmap <leader>rn <Action>(RenameElement)
nmap <leader>rw <Action>(SurroundWith) " wrap
nmap <leader>ru <Action>(Unwrap)

" build
map <leader>bg <Action>(Android.SyncProject)
map <leader>bv <Action>(ActivateBuildVariantsToolWindow)

" run
map <leader>rc <Action>(ChooseRunConfiguration)
map <leader>rq <Action>(Stop)
map <leader>rr <Action>(Rerun)

" debug
map <leader>dx <Action>(Debug)
map <leader>db <Action>(ToggleLineBreakpoint)
map <leader>de <Action>(EditBreakpoint)
map <leader>dv <Action>(ViewBreakpoints)

" hierarchy
nmap <leader>hc <Action>(CallHierarchy)
nmap <leader>hm <Action>(MethodHierarchy)
nmap <leader>ht <Action>(TypeHierarchy)

" splits
map <leader>H <Action>(SplitHorizontally)
map <leader>V <Action>(SplitVertically)
map <c-/> <Action>(SplitVertically)
map <c--> <Action>(SplitHorizontally)
map <c-=> <Action>(Unsplit)
map <c-tab> <Action>(NextSplitter)

" menu
nmap <leader>mt <Action>(ToolWindowsGroup)
nmap <leader>ms <Action>(ScopeViewPopupMenu)

" bookmark
nmap mm <Action>(ToggleBookmark)
nmap ma <Action>(ShowBookmarks)

" VCS/Git
map <leader>v <Action>(Vcs.QuickListPopupAction)
map <leader>va <Action>(Annotate)
map <leader>vc <Action>(ActivateCommitToolWindow)
map <leader>vk <Action>(Git.Commit.Stage)
map <leader>vd <Action>(Compare.SameVersion)
map <leader>vh <Action>(Vcs.ShowTabbedFileHistory)
map <leader>vr <Action>(Git.ResolveConflicts)

" yank/copy
nmap <leader>yp <Action>(CopyAbsolutePath)
nmap <leader>yr <Action>(CopyReference)

" Hide distractions
map <leader>x <Action>(HideAllWindows)
map <leader>zz <Action>(ToggleDistractionFreeMode)
map <leader>zp <Action>(TogglePresentationMode)

" collapse/expand regions
nmap <leader>za <Action>(ExpandCollapseToggleAction)
nmap <leader>zc <Action>(CollapseAllRegions)
nmap <leader>ze <Action>(ExpandAllRegions)


"-----------------------
"----- HARPOON(ER) -----
"-----------------------

nmap <leader>he <Action>(HarpoonerQuickMenu) " edit
nmap <leader>hh <Action>(HarpoonerToggleFile)
nmap <m-0> <Action>(HarpoonerOpenFile0)
nmap <m-1> <Action>(HarpoonerOpenFile1)
nmap <m-2> <Action>(HarpoonerOpenFile2)
nmap <m-3> <Action>(HarpoonerOpenFile3)
nmap <m-4> <Action>(HarpoonerOpenFile4)
nmap <m-5> <Action>(HarpoonerOpenFile5)
nmap <m-6> <Action>(HarpoonerOpenFile6)
nmap <c-0> <Action>(HarpoonerReplaceFile0)
nmap <c-1> <Action>(HarpoonerReplaceFile1)
nmap <c-2> <Action>(HarpoonerReplaceFile2)
nmap <c-3> <Action>(HarpoonerReplaceFile3)
nmap <c-4> <Action>(HarpoonerReplaceFile4)
nmap <c-5> <Action>(HarpoonerReplaceFile5)
nmap <c-6> <Action>(HarpoonerReplaceFile6)
